---
# base role handlers
- name: Update timezone data
  command: dpkg-reconfigure --frontend noninteractive tzdata
  when: ansible_os_family == "Debian"

- name: Generate locales
  command: locale-gen

# Ntp handlers
- name: Start ntp
  service:
    name: ntpd
    state: started
    enabled: yes

- name: Restart ntp
  service:
    name: ntpd
    state: restarted
    enabled: yes

# Smartd handlers
- name: Restart smartd
  service:
    name: smartmontools
    state: restarted
    enabled: yes

# Ssh handlers
# Ubuntu names this services ssh
- name: Restart ssh
  service:
    name: ssh
    state: restarted
    enabled: yes
  when: ansible_os_family == "Debian"

# And Archlinux names it sshd
- name: Restart sshd
  service:
    name: sshd
    state: restarted
    enabled: yes
  when: ansible_os_family == "Archlinux"

- name: Restart ufw
  service:
    name: ufw
    state: restarted
    enabled: yes

# Chrony

- name: Restart chrony
  service:
    name: chrony
    state: restarted
    enabled: yes
